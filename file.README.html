<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.16
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="file_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="puppet_class_list_link"
        href="puppet_class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'><h1 id="phabricator">phabricator</h1>

<p><a href="https://travis-ci.org/joshuaspence/puppet-phabricator"><img src="https://travis-ci.org/joshuaspence/puppet-phabricator.svg?branch=master" alt="Build Status" /></a>
<a href="https://forge.puppet.com/joshuaspence/phabricator"><img src="https://img.shields.io/puppetforge/v/joshuaspence/phabricator.svg" alt="Puppet Forge" /></a>
<a href="https://forge.puppet.com/joshuaspence/phabricator"><img src="https://img.shields.io/puppetforge/dt/joshuaspence/phabricator.svg" alt="Puppet Forge" /></a></p>

<h2 id="table-of-contents">Table of Contents</h2>

<ol>
  <li><a href="#label-Description">Description</a></li>
  <li><a href="#label-Usage">Usage</a></li>
  <li><a href="#label-Reference">Reference</a></li>
  <li><a href="#label-Limitations">Limitations</a></li>
  <li><a href="#label-Development">Development</a></li>
</ol>

<h2 id="description">Description</h2>

<p>This module installs, configures and manages <a href="https://www.phacility.com/phabricator/">Phabricator</a>, a
suite of web-based software development collaboration tools, including:</p>

<ul>
  <li><a href="https://www.phacility.com/phabricator/arcanist/">Arcanist</a></li>
  <li><a href="https://www.phacility.com/phabricator/differential/">Differential</a></li>
  <li><a href="https://www.phacility.com/phabricator/diffusion/">Diffusion</a></li>
  <li><a href="https://www.phacility.com/phabricator/maniphest/">Maniphest</a></li>
  <li><a href="https://www.phacility.com/phabricator/phriction/">Phriction</a></li>
</ul>

<p>Phabricator is offered as a <a href="https://www.phacility.com/pricing/">hosted service</a>
by <a href="phacility">Phacility</a>, but can also be installed
<a href="https://secure.phabricator.com/book/phabricator/article/installation_guide/">on-premise</a>.</p>

<h2 id="usage">Usage</h2>

<p>In order to utilize this module it is necessary to configure Phabricator using
the <code>$config_hash</code> parameter. Specifically, the following settings are required:</p>

<ul>
  <li><strong><code>mysql.host</code>:</strong> MySQL database hostname.</li>
  <li><strong><code>mysql.user</code>:</strong> MySQL username to use when connecting to the database.</li>
  <li><strong><code>mysql.pass</code>:</strong> MySQL password to use when connecting to the database.</li>
</ul>

<p>There are many other settings that can be passed to the <code>$config_hash</code>
parameter, but the above settings should be the minimal configuration that is
required in order for Phabricator to be functional. The <code>$config_hash</code>
parameter is JSON-encoded and written to <code>conf/local/local.json</code>. See
<a href="advanced-configuration">Advanced Configuration</a> for further information on
configuring Phabricator.</p>

<p>```puppet
class { ‘phabricator’:
  config_hash =&gt; {
    ‘mysql.host’ =&gt; ‘localhost’,
    ‘mysql.user’ =&gt; ‘user’,
    ‘mysql.pass’ =&gt; ‘password’,
  },</p>

<p>storage_upgrade          =&gt; true,
  storage_upgrade_user     =&gt; ‘admin’,
  storage_upgrade_password =&gt; ‘password’,
}</p>

<p>include phabricator::aphlict
include phabricator::daemons
```</p>

<h3 id="storage-upgrades-and-adjustments">Storage Upgrades and Adjustments</h3>

<p>Phabricator uses MySQL or another MySQL-compatible database (such as MariaDB or
Amazon RDS). Phabricator consists of a <code>./bin/storage</code> script which can be used
to manage the database schema and apply storage upgrades and adjustments. You
can find more information about these processes in the official documentation
(see <a href="storage-upgrades">Storage: Configuring MySQL</a> and <a href="storage-adjustments">Managing Storage Adjustments</a>).</p>

<p>This module can, optionally, execute <code>./bin/storage upgrade</code> automatically in
order to apply storage upgrades and adjustments. Whilst I haven’t observed any
issues using Puppet to apply storage upgrades and adjustments, I suspect that
many (most?) users of this module would prefer to apply storage upgrades and
adjustments using some other mechanism, perhaps as a step in a shell script
used for deployments. As such, <code>$storage_upgrade</code> defaults to <code>false</code>.</p>

<p>Users of this module that choose to set <code>$storage_upgrade</code> to <code>true</code> should be
aware of the following caveats:</p>

<ul>
  <li>Storage upgrades can take a long time to complete. Generally the time taken
to apply storage upgrades will be proportional to the amount of data stored
in Phabricator. Whilst storage upgrades should be able to be applied multiple
times without adverse side effects, terminating the <code>./bin/storage upgrade</code>
workflow is strongly advised against.</li>
  <li>It is strongly recommended that a Phabricator installation is taken offline
before storage upgrades are applied.</li>
</ul>

<h2 id="reference">Reference</h2>

<p>See the <a href="https://joshuaspence.github.io/puppet-phabricator/">documentation</a>.</p>

<h2 id="limitations">Limitations</h2>

<p>This module has been tested on:</p>

<ul>
  <li>Ubuntu 16.04</li>
</ul>

<p>Testing on other platforms has been minimal and cannot be guaranteed.</p>

<h2 id="development">Development</h2>

<p>Contributions to this module are welcome, but must be accompanied by
documentation, unit test coverage (with <a href="http://rspec-puppet.com/"><code>rspec-puppet</code></a>) and
acceptance test coverage (with <a href="https://github.com/puppetlabs/beaker-rspec"><code>beaker-rspec</code></a>). Refactoring
existing code and documentation changes do not require additional tests.</p>

<p>All pull requests must pass successfully through <a href="https://travis-ci.org/joshuaspence/puppet-phabricator/">Travis CI</a> before
being accepted and merged. Each of the steps that is executed in
<a href="https://travis-ci.org/joshuaspence/puppet-phabricator/">Travis CI</a> should be reproducible locally using the following commands:</p>

<table>
  <thead>
    <tr>
      <th>Task</th>
      <th>Command</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Syntax Checks and Linting</td>
      <td><code>bundle exec rake</code></td>
    </tr>
    <tr>
      <td>Unit tests</td>
      <td><code>bundle exec rake spec</code></td>
    </tr>
    <tr>
      <td>Acceptance tests</td>
      <td><code>bundle exec rake beaker</code></td>
    </tr>
  </tbody>
</table>

</div></div>

      <div id="footer">
     Generated by <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>.
</div>

    </div>
  </body>
</html>